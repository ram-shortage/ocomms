# Milestone v0.6.0: Polish & Hardening

**Status:** ✅ SHIPPED 2026-01-24
**Phases:** 30-37
**Total Plans:** 41

## Overview

v0.6.0 Polish & Hardening addresses security findings from audit, fixes known bugs, and delivers workspace management, sidebar reorganization, and mobile redesign. Security fixes are prioritized by severity (critical first), followed by feature work in logical delivery order.

## Phases

### Phase 30: Critical Security

**Goal**: Eliminate critical attack vectors that could compromise application integrity
**Depends on**: Nothing (first phase of milestone)
**Plans**: 3 plans

Plans:
- [x] 30-01-PLAN.md — CSP nonce implementation with violation reporting
- [x] 30-02-PLAN.md — Redis session validation with immediate revocation
- [x] 30-03-PLAN.md — SVG upload blocking and asset migration

**Requirements:** SEC2-01, SEC2-02, SEC2-03
**Completed:** 2026-01-22

### Phase 31: High Security + Bug Fixes

**Goal**: Close high-severity security gaps and fix known user-facing bugs
**Depends on**: Phase 30
**Plans**: 4 plans

Plans:
- [x] 31-01-PLAN.md — Socket.IO rate limiting with toast warnings
- [x] 31-02-PLAN.md — Unicode and HTML content sanitization
- [x] 31-03-PLAN.md — Data export authorization and audit log integrity
- [x] 31-04-PLAN.md — Mobile UI bug fixes (DM route, profile spacing, nav highlighting)

**Requirements:** SEC2-04 to SEC2-08, FIX-01 to FIX-05
**Completed:** 2026-01-22

### Phase 32: Medium/Low Security

**Goal**: Complete security hardening with medium and low severity items
**Depends on**: Phase 31
**Plans**: 7 plans

Plans:
- [x] 32-01-PLAN.md — Password breach check (bloom filter) and password history
- [x] 32-02-PLAN.md — User storage quota tracking with 1GB default
- [x] 32-03-PLAN.md — Secure cookies, Pino logging, security headers
- [x] 32-04-PLAN.md — Socket.IO CORS whitelist and guest disconnection
- [x] 32-05-PLAN.md — Redirect validation and SSRF DNS rebinding protection
- [x] 32-06-PLAN.md — TOTP MFA with backup codes
- [x] 32-07-PLAN.md — Orphaned attachment cleanup and SRI hashes

**Requirements:** SEC2-09 to SEC2-22
**Completed:** 2026-01-23

### Phase 33: Workspace Management

**Goal**: Users can discover, join, and switch between workspaces
**Depends on**: Phase 32
**Plans**: 4 plans

Plans:
- [x] 33-01-PLAN.md — Join request schema and workspace unread aggregation
- [x] 33-02-PLAN.md — Workspace switcher UI with last-visited restoration
- [x] 33-03-PLAN.md — Browse workspaces page and join flow
- [x] 33-04-PLAN.md — Admin join request approval with notifications

**Requirements:** WKSP2-01 to WKSP2-06
**Completed:** 2026-01-23

### Phase 34: Sidebar Reorganization

**Goal**: Users can customize sidebar order with drag-and-drop, synced across devices
**Depends on**: Phase 33
**Plans**: 5 plans

Plans:
- [x] 34-01-PLAN.md — Database schema and server actions for sidebar preferences
- [x] 34-02-PLAN.md — Category drag-and-drop reordering
- [x] 34-03-PLAN.md — DM conversation drag-and-drop reordering
- [x] 34-04-PLAN.md — Sidebar sections reordering and Settings page
- [x] 34-05-PLAN.md — Cross-device sync integration and verification

**Requirements:** SIDE-01 to SIDE-08
**Completed:** 2026-01-23

### Phase 35: Mobile Redesign

**Goal**: All features accessible on mobile with polished, touch-friendly UI
**Depends on**: Phase 34
**Plans**: 6 plans

Plans:
- [x] 35-01-PLAN.md — Install vaul, Drawer component, useLongPress hook
- [x] 35-02-PLAN.md — Analytics dashboard mobile responsive
- [x] 35-03-PLAN.md — Mobile navigation with More menu (Scheduled, Reminders, Saved)
- [x] 35-04-PLAN.md — Mobile status drawer and emoji picker
- [x] 35-05-PLAN.md — Channel header mobile overflow menu enhancement
- [x] 35-06-PLAN.md — Touch target audit and visual polish

**Requirements:** MOBI2-01 to MOBI2-05, MOBI2-08 to MOBI2-12 (MOBI2-06, MOBI2-07 deferred)
**Completed:** 2026-01-23

### Phase 36: Stabilization

**Goal**: Verify all v0.6.0 functionality works together, fix integration issues
**Depends on**: Phase 35
**Plans**: 5 plans

Plans:
- [x] 36-01-PLAN.md — Test infrastructure setup (Docker Compose, Playwright config)
- [x] 36-02-PLAN.md — Security requirement verification tests
- [x] 36-03-PLAN.md — Workspace and sidebar E2E tests
- [x] 36-04-PLAN.md — Mobile E2E and regression tests
- [x] 36-05-PLAN.md — Release documentation and final verification

**Completed:** 2026-01-24

### Phase 37: E2E Test Fixes

**Goal**: Fix E2E test selectors and assertions for demo-seed compatibility
**Depends on**: Phase 36
**Plans**: 7 plans

Plans:
- [x] 37-01-PLAN.md — Core flow test selector updates
- [x] 37-02-PLAN.md — Security test updates
- [x] 37-03-PLAN.md — Workspace test fixes
- [x] 37-04-PLAN.md — Sidebar test fixes
- [x] 37-05-PLAN.md — Mobile test fixes
- [x] 37-06-PLAN.md — Final verification
- [x] 37-07-PLAN.md — Code review fixes

**Test Results:** 91/123 passing (74%)
**Completed:** 2026-01-24

---

## Milestone Summary

**Key Decisions:**

| Decision | Rationale | Outcome |
|----------|-----------|---------|
| CSP nonce implementation | Eliminate inline script vulnerabilities | Good |
| Redis session validation | Immediate revocation, no cookie caching | Good |
| SVG blocking (raster-only) | Prevent XSS via malicious SVG content | Good |
| Socket.IO rate limiting | Prevent DoS via event flooding | Good |
| Bloom filter for breach check | 100 common passwords, minimal memory | Good |
| TOTP MFA with backup codes | Standard 2FA without hardware dependency | Good |
| dnd-kit for sidebar drag-drop | React 18/19 compatible, accessible | Good |
| Vaul for mobile drawers | Native iOS-style bottom sheets | Good |
| 44px touch targets | iOS HIG compliance | Good |
| E2E_SEED_MODE for tests | Support both demo-seed and e2e-seed | Good |

**Issues Resolved:**

- CSP violations from inline scripts
- Session validation cache bypass vulnerability
- SVG upload XSS attack vector
- Socket.IO event flooding
- Unicode control character spoofing
- Channel notes authorization bypass
- Data export IDOR vulnerability
- Mobile DM route 404
- Mobile navigation highlighting
- Workspace switching without position memory

**Issues Deferred:**

- MOBI2-06: User groups mobile management (admin feature, desktop-only)
- MOBI2-07: Guest management mobile (admin feature, desktop-only)

**Technical Debt Incurred:**

- 24 E2E tests failing (74% pass rate accepted)
- Sidebar drag-drop tests flaky (dnd-kit timing)
- Realtime sync tests fail (browser context isolation)
- Typing bar layout whitespace fix pending

---

*For current project status, see .planning/ROADMAP.md*
*Archived: 2026-01-24*
