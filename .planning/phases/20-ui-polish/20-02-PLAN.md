---
phase: 20-ui-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - USER-SETUP.md
autonomous: true
user_setup: []

must_haves:
  truths:
    - "USER-SETUP.md exists at project root"
    - "Document covers complete deployment from zero"
    - "Push notification configuration documented"
    - "Backup procedures included"
  artifacts:
    - path: "USER-SETUP.md"
      provides: "Complete user setup documentation"
      min_lines: 150
  key_links: []
---

<objective>
Create comprehensive USER-SETUP.md documentation for deploying and configuring OComms.

Purpose: Enable self-hosters to deploy OComms without guessing configuration or consulting scattered docs.
Output: Complete setup guide at project root covering deployment, first run, and ongoing maintenance.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/20-ui-polish/20-RESEARCH.md

Reference files:
@README.md
@.env.example
@docker-compose.yml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create USER-SETUP.md</name>
  <files>USER-SETUP.md</files>
  <action>
  Create USER-SETUP.md at project root with the following sections:

  ## Structure

  1. **Prerequisites**
     - Docker and Docker Compose (required versions)
     - Domain name with DNS configured
     - SSL certificate (Let's Encrypt recommended)
     - SMTP server (optional, for email verification)

  2. **Initial Deployment**
     - Clone repository
     - Copy .env.example to .env
     - Required environment variables with clear descriptions:
       - DATABASE_URL
       - BETTER_AUTH_SECRET (how to generate)
       - NEXT_PUBLIC_APP_URL
     - Optional environment variables:
       - REDIS_URL
       - SMTP_* variables
     - nginx domain configuration (replace example.com)
     - Start services: `docker-compose up -d`
     - Initialize database: `docker-compose exec app npm run db:push`

  3. **First-Time Setup**
     - Creating first organization
     - First user becomes owner
     - Inviting members

  4. **Push Notifications Configuration**
     - VAPID key generation: `npx web-push generate-vapid-keys`
     - Add to .env: VAPID_PUBLIC_KEY, VAPID_PRIVATE_KEY, VAPID_SUBJECT
     - Restart services after adding keys

  5. **Backup and Restore**
     - Automated backup script: `docker-compose exec db /backups/backup.sh`
     - Restore command: `docker-compose exec db /backups/restore.sh /backups/<filename>.dump`
     - Recommended backup schedule

  6. **Updating OComms**
     - Pull latest: `git pull`
     - Rebuild: `docker-compose build`
     - Run migrations: `docker-compose exec app npm run db:push`
     - Restart: `docker-compose up -d`

  7. **Data Export**
     - Admin UI export (Settings > Admin > Export Data)
     - CLI export: `npx tsx scripts/export-data.ts <org-id> ./export`
     - GDPR compliance notes

  8. **Troubleshooting**
     - Logs: `docker-compose logs app`
     - Database connection issues
     - WebSocket connection issues (nginx upgrade headers)
     - Push notifications not working (VAPID config)

  ## Tone and Style

  - Technical but accessible
  - Code blocks for all commands
  - Consistent with README.md style
  - No emojis
  - Clear section headers
  - Estimated time for each section where relevant
  </action>
  <verify>
  ```bash
  test -f USER-SETUP.md && wc -l USER-SETUP.md
  ```
  Should show file exists with 150+ lines.

  Check key sections:
  ```bash
  grep -c "## " USER-SETUP.md
  ```
  Should show 8+ section headers.
  </verify>
  <done>USER-SETUP.md exists with complete deployment, configuration, and maintenance instructions.</done>
</task>

</tasks>

<verification>
1. `test -f USER-SETUP.md` returns success
2. Document has all 8 main sections
3. VAPID configuration documented
4. Backup/restore procedures included
5. Update procedures included
</verification>

<success_criteria>
- USER-SETUP.md exists at project root (UIPOL-05 complete)
- Covers deployment from zero to running system
- Push notification setup documented
- Backup procedures documented
- Consistent with README.md style
</success_criteria>

<output>
After completion, create `.planning/phases/20-ui-polish/20-02-SUMMARY.md`
</output>
