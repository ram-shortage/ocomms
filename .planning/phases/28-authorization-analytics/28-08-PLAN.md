---
phase: 28-authorization-analytics
plan: 08
type: execute
wave: 4
depends_on: ["28-05", "28-06", "28-07"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All user group requirements verified (UGRP-01 through UGRP-06)"
    - "All guest account requirements verified (GUST-01 through GUST-08)"
    - "All analytics requirements verified (ANLY-01 through ANLY-08)"
  artifacts: []
  key_links: []
---

<objective>
Verify all Phase 28 features work end-to-end.

Purpose: Human verification checkpoint to confirm user groups, guest accounts, and analytics dashboard meet requirements before proceeding.

Output: Verified phase completion or identified gaps.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/REQUIREMENTS.md
@.planning/phases/28-authorization-analytics/28-05-SUMMARY.md
@.planning/phases/28-authorization-analytics/28-06-SUMMARY.md
@.planning/phases/28-authorization-analytics/28-07-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 1: Verify user groups feature</name>
  <what-built>
User group management and @group mentions:
- Admin settings page for user groups
- Group CRUD operations
- Member management with guest exclusion
- Tabbed mention autocomplete
- Group mention notifications (channel-intersected)
- Group mention popup
  </what-built>
  <how-to-verify>
**Setup:**
1. Log in as admin
2. Create a test channel with 3+ members

**UGRP-01: Create user group**
1. Navigate to Settings > User Groups
2. Click "Create Group"
3. Enter name "Test Team", handle "testteam"
4. Verify group created

**UGRP-04: Manage members**
1. Open the group
2. Add 2 members to the group
3. Remove 1 member
4. Verify changes persist

**UGRP-05: Handle uniqueness**
1. Try creating another group with handle "testteam"
2. Should show error "Handle already exists"

**GUST-07: Guests excluded**
1. If you have a guest user, try adding them to the group
2. Should show error or be disabled

**UGRP-02 + UGRP-06: Group mentions**
1. In the test channel, type "@"
2. Switch to "Groups" tab
3. Select @testteam
4. Send message
5. Verify: Only group members WHO ARE IN THE CHANNEL receive notification
6. Members not in channel should NOT get notification

**UGRP-03: View group members**
1. Find the message with @testteam mention
2. Click the @testteam text
3. Verify popup shows group members
  </how-to-verify>
  <resume-signal>Type "groups verified" or describe issues found</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify guest accounts feature</name>
  <what-built>
Guest account management and access control:
- Admin settings page for guests
- Invite link generation
- Invite redemption flow
- Guest badge throughout app
- Channel-restricted access
- Expiration and soft lock
  </what-built>
  <how-to-verify>
**GUST-01 + GUST-02: Create guest invite**
1. Navigate to Settings > Guests
2. Click "Create Invite"
3. Select 1-2 channels for guest access
4. Optionally set expiration date
5. Copy generated link

**Guest invite redemption:**
1. Open link in incognito/different browser
2. Verify welcome page shows channels
3. Sign up/sign in as new user
4. Click "Join as Guest"
5. Verify welcome modal explains limits

**GUST-03: Guest badge**
1. In main browser (as admin), check member list
2. Guest should have "Guest" badge
3. Check guest's profile - should have badge
4. Have guest send a message, check message header for badge

**GUST-04: Guest can message**
1. As guest, send message in allowed channel
2. React to a message
3. Upload a file
4. All should work

**GUST-02: Channel restriction**
1. As guest, try to access a channel NOT in their invite
2. Should be blocked with error

**GUST-06: Limited member directory**
1. As guest, view member list
2. Should only see members from their allowed channels
3. Should NOT see full workspace directory

**GUST-05: Remove guest**
1. As admin, go to Settings > Guests
2. Click Remove on the guest
3. Verify guest can no longer access workspace

**GUST-08: Expiration (if time permits)**
1. Create new invite with short expiration
2. Redeem it
3. Wait for expiration
4. Verify guest is soft-locked (can view but not post)
5. As admin, extend expiration
6. Verify guest can post again
  </how-to-verify>
  <resume-signal>Type "guests verified" or describe issues found</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Verify analytics dashboard</name>
  <what-built>
Admin analytics dashboard:
- Tabbed sections (Messages, Users, Channels, Storage)
- Message volume line chart
- DAU/WAU/MAU metrics
- Channel activity ranking
- Peak usage times
- Storage usage breakdown
- Date range filtering
- CSV export
  </what-built>
  <how-to-verify>
**Access control:**
1. As admin, navigate to Settings > Analytics
2. Dashboard should load
3. As non-admin, try to access - should be blocked

**ANLY-01: Message volume**
1. On Messages tab, verify line chart shows data
2. Hover to see tooltip with date and count

**ANLY-02: Active users**
1. On Users tab, verify DAU/WAU/MAU numbers
2. Check for trend indicators

**ANLY-03: Channel activity**
1. On Channels tab, verify top 10 list
2. Should show channel names and message counts

**ANLY-04: Date filtering**
1. Click "7 days" preset
2. Verify data updates
3. Click "30 days" preset
4. Try custom date range

**ANLY-05: CSV export**
1. Click Export button
2. Select "Daily" granularity
3. Verify CSV downloads
4. Open in Excel/Sheets
5. Verify data matches dashboard

**ANLY-06: Peak times**
1. On Messages tab, find hourly distribution chart
2. Verify 24-hour bars showing activity

**ANLY-07: Storage**
1. On Storage tab, verify total usage shown
2. Verify breakdown by channel

**ANLY-08: Aggregate only**
1. Review all views
2. Confirm no individual user activity is exposed
3. Only aggregate counts, not "User X sent Y messages"

**Manual refresh:**
1. Click Refresh button
2. Verify data reloads
3. Confirm no auto-polling (data doesn't change on its own)
  </how-to-verify>
  <resume-signal>Type "analytics verified" or describe issues found</resume-signal>
</task>

</tasks>

<verification>
- [ ] All UGRP requirements (01-06) verified
- [ ] All GUST requirements (01-08) verified
- [ ] All ANLY requirements (01-08) verified
- [ ] No critical issues found
</verification>

<success_criteria>
Phase 28 verified complete:
- User groups: Admin can create groups, manage members, @mentions work with channel intersection
- Guest accounts: Invite links work, channel restrictions enforced, badges visible, expiration works
- Analytics: Dashboard shows all metrics, date filtering works, CSV export works
</success_criteria>

<output>
After completion, create `.planning/phases/28-authorization-analytics/28-08-SUMMARY.md`
</output>
