---
phase: 35-mobile-redesign
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/analytics/analytics-dashboard.tsx
  - src/components/analytics/date-range-picker.tsx
  - src/components/analytics/message-volume-chart.tsx
  - src/components/analytics/channel-activity-table.tsx
autonomous: true

must_haves:
  truths:
    - "Analytics dashboard is usable on mobile viewport"
    - "Charts resize appropriately on small screens"
    - "Tab triggers are tappable on mobile"
    - "Date picker works on touch devices"
  artifacts:
    - path: "src/components/analytics/analytics-dashboard.tsx"
      provides: "Mobile-responsive analytics dashboard"
      contains: "min-h-11"
  key_links:
    - from: "src/components/analytics/analytics-dashboard.tsx"
      to: "Tabs component"
      via: "responsive layout"
      pattern: "flex.*flex-col.*sm:flex-row"
---

<objective>
Make workspace analytics viewable on mobile with responsive charts and touch-friendly controls.

Purpose: Analytics is admin-only but admins should be able to check workspace stats on mobile. The existing dashboard uses Tabs and charts that need responsive adjustments.

Output: Analytics dashboard that works on mobile viewports with usable charts and controls.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/35-mobile-redesign/35-CONTEXT.md
@src/components/analytics/analytics-dashboard.tsx
@src/components/analytics/date-range-picker.tsx
@src/components/analytics/message-volume-chart.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Make analytics dashboard mobile-responsive</name>
  <files>
    src/components/analytics/analytics-dashboard.tsx
  </files>
  <action>
Update the AnalyticsDashboard component for mobile:

1. **TabsList** - On mobile, the tabs may overflow. Options:
   - Use scrollable tabs container: `overflow-x-auto flex-nowrap`
   - Or reduce to icon-only on very small screens

2. **Header row** - Already has `flex-col sm:flex-row` which is good. Verify the controls (date picker, refresh, export) stack properly on mobile.

3. **Touch targets** - Add `min-h-11` to:
   - TabsTrigger elements
   - Button elements (refresh, export)
   - Any clickable controls

4. **Spacing** - Ensure adequate padding on mobile:
   - The page wrapper already has `p-8` which may be too much on mobile
   - Consider `p-4 sm:p-8` for tighter mobile spacing

5. **Export button** - Verify it's accessible (not hidden off-screen)

The dashboard structure is already reasonable - focus on touch targets and overflow handling.
  </action>
  <verify>
1. Open /settings/analytics on mobile viewport (375px width)
2. All tabs are tappable
3. Date picker and buttons are reachable
4. No horizontal overflow causing hidden content
  </verify>
  <done>
Analytics dashboard header and tabs work on mobile viewport with proper touch targets.
  </done>
</task>

<task type="auto">
  <name>Task 2: Make charts mobile-responsive</name>
  <files>
    src/components/analytics/message-volume-chart.tsx
    src/components/analytics/peak-times-chart.tsx
    src/components/analytics/channel-activity-table.tsx
    src/components/analytics/storage-usage-card.tsx
  </files>
  <action>
Review and update chart components for mobile:

1. **MessageVolumeChart** (line/bar chart):
   - Charts should use responsive container from recharts
   - Verify ResponsiveContainer is used (should be already)
   - If legend exists, consider hiding on mobile or making smaller
   - Reduce tick font size on mobile if needed

2. **PeakTimesChart** (heatmap or bar chart):
   - Same responsive container check
   - May need to scroll horizontally if data is dense
   - Consider simplifying display on mobile

3. **ChannelActivityTable**:
   - Tables can overflow on mobile
   - Wrap in `overflow-x-auto` container
   - Consider showing fewer columns on mobile or stacking rows

4. **StorageUsageCard**:
   - Progress bars and stats should stack on mobile
   - Verify text doesn't overflow

The project uses Recharts which has built-in responsive support. Main focus is ensuring containers allow proper sizing and tables scroll when needed.
  </action>
  <verify>
1. Charts resize when viewport changes
2. Table scrolls horizontally if content overflows
3. No text truncation that hides important data
4. Charts remain readable at 375px width
  </verify>
  <done>
All analytics charts and tables work on mobile viewport with appropriate responsive behavior.
  </done>
</task>

<task type="auto">
  <name>Task 3: Mobile-optimize date range picker</name>
  <files>
    src/components/analytics/date-range-picker.tsx
  </files>
  <action>
Review the DateRangePicker component for mobile usability:

1. Check if it uses a Popover or Dialog for the calendar
2. If Popover: verify it doesn't get cut off on mobile (may need to adjust positioning)
3. Calendar controls should have touch-friendly sizing (min-h-11 on day cells if possible)
4. Consider whether the picker should be full-width on mobile

The existing react-day-picker calendar should be relatively mobile-friendly. Main concerns:
- Popover positioning (ensure align="start" or similar doesn't push content off-screen)
- Day cell touch targets
- Month navigation buttons

If the picker is too cramped, consider using a simpler preset approach on mobile (like "Last 7 days", "Last 30 days") but this is optional polish.
  </action>
  <verify>
1. Date picker opens correctly on mobile
2. Can select dates with touch
3. Popover doesn't get cut off
4. Close/apply buttons are reachable
  </verify>
  <done>
Date range picker works on mobile with proper positioning and touch targets.
  </done>
</task>

</tasks>

<verification>
1. Navigate to /{workspace}/settings/analytics on mobile viewport
2. All four tabs (Messages, Users, Channels, Storage) are accessible
3. Date picker opens and is usable
4. Charts display and resize appropriately
5. Tables scroll horizontally if needed
6. No content is inaccessible due to overflow
</verification>

<success_criteria>
- Analytics dashboard usable on mobile viewport (MOBI2-08)
- All interactive elements have adequate touch targets
- Charts remain readable on small screens
- No horizontal scroll on main content (only tables if needed)
</success_criteria>

<output>
After completion, create `.planning/phases/35-mobile-redesign/35-02-SUMMARY.md`
</output>
