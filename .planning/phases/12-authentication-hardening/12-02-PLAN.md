---
phase: 12-authentication-hardening
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/components/ui/progress.tsx
  - src/components/auth/password-strength-meter.tsx
  - src/components/auth/password-requirements.tsx
  - src/components/auth/signup-form.tsx
autonomous: true

must_haves:
  truths:
    - "User sees real-time password strength indicator while typing"
    - "User sees checklist of requirements with visual feedback"
    - "Strong passwords show green indicator, weak show red"
  artifacts:
    - path: "src/components/ui/progress.tsx"
      provides: "Radix Progress primitive"
      exports: ["Progress"]
    - path: "src/components/auth/password-strength-meter.tsx"
      provides: "zxcvbn-powered strength visualization"
      exports: ["PasswordStrengthMeter"]
    - path: "src/components/auth/password-requirements.tsx"
      provides: "Real-time requirements checklist"
      exports: ["PasswordRequirements"]
  key_links:
    - from: "src/components/auth/signup-form.tsx"
      to: "src/components/auth/password-strength-meter.tsx"
      via: "import and render with password state"
      pattern: "PasswordStrengthMeter"
    - from: "src/components/auth/signup-form.tsx"
      to: "src/components/auth/password-requirements.tsx"
      via: "import and render with password state"
      pattern: "PasswordRequirements"
---

<objective>
Add password strength visualization to the signup form with real-time feedback.

Purpose: Give users immediate feedback on password quality during signup, showing both a strength meter (weak/medium/strong) and a requirements checklist. This improves UX by catching weak passwords before server rejection.

Output: Progress component, strength meter component, requirements checklist component, and updated signup form.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/12-authentication-hardening/12-CONTEXT.md
@.planning/phases/12-authentication-hardening/12-RESEARCH.md

@src/components/auth/signup-form.tsx
@src/components/ui/button.tsx (for style reference)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install dependencies and create Progress component</name>
  <files>
    package.json
    src/components/ui/progress.tsx
  </files>
  <action>
1. Install required packages:
   ```bash
   npm install zxcvbn @radix-ui/react-progress
   npm install -D @types/zxcvbn
   ```

2. Create `src/components/ui/progress.tsx`:
   - Follow project's existing Radix primitive pattern (see button.tsx, dialog.tsx)
   - Wrap @radix-ui/react-progress with Tailwind styling
   - Export Progress component with:
     - Root element with bg-gray-200 rounded-full h-2
     - Indicator element with transition-all, width based on value prop
     - Accept className prop for customization (especially indicator color)
   - Use React.forwardRef pattern matching other UI components
   - Include proper displayName
  </action>
  <verify>
    - `npm ls zxcvbn` shows installed
    - `npm ls @radix-ui/react-progress` shows installed
    - `npx tsc --noEmit` passes
    - Progress component exports correctly
  </verify>
  <done>
    Dependencies installed, Progress primitive available for use in password strength meter.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create password feedback components and update signup form</name>
  <files>
    src/components/auth/password-strength-meter.tsx
    src/components/auth/password-requirements.tsx
    src/components/auth/signup-form.tsx
  </files>
  <action>
1. Create `src/components/auth/password-strength-meter.tsx`:
   - "use client" directive (uses dynamic import)
   - Props: `{ password: string }`
   - Dynamically import zxcvbn to avoid bundle size impact (per research pitfall #5)
   - Use useState to store zxcvbn result, useEffect to calculate on password change
   - Show loading state while zxcvbn loads
   - Display:
     - Progress bar colored by score (0: red, 1: orange, 2: yellow, 3: lime, 4: green)
     - Label: "Very Weak", "Weak", "Fair", "Strong", "Very Strong"
     - Optional: Show zxcvbn feedback.warning if present
   - Score 0-4 maps to progress value 20-100 (20% per level)

2. Create `src/components/auth/password-requirements.tsx`:
   - "use client" directive
   - Props: `{ password: string }`
   - Display checklist of requirements matching CONTEXT.md rules:
     - At least 8 characters
     - Uppercase letter
     - Lowercase letter
     - Number
     - Symbol
   - Each requirement shows checkmark (green) when met, circle (gray) when not
   - Use project's existing color classes (text-green-600, text-gray-400)

3. Update `src/components/auth/signup-form.tsx`:
   - Import PasswordStrengthMeter and PasswordRequirements
   - Add both components below the password input field
   - Pass current password state to both
   - Wrap in a div with appropriate spacing (space-y-2)
   - Components should only render when password has content (avoid empty state)

IMPORTANT from research:
- zxcvbn is 400KB gzipped - MUST use dynamic import
- Dynamic import on first password character or input focus
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - `npm run build` succeeds (no bundle size warning expected due to dynamic import)
    - Navigate to /signup, type in password field
    - Strength meter appears and updates as you type
    - Requirements checklist shows which rules are met/unmet
  </verify>
  <done>
    Signup form shows real-time password feedback with strength meter and requirements checklist.
  </done>
</task>

</tasks>

<verification>
1. Visit /signup page
2. Start typing password:
   - "a" -> Very Weak (red), only lowercase checked
   - "aA" -> Very Weak, lowercase + uppercase checked
   - "aA1" -> Weak, lowercase + uppercase + number checked
   - "aA1!" -> Weak/Fair, all checks except length
   - "aA1!test" -> Fair/Strong (8+ chars), all checks green
3. Strength meter smoothly transitions between colors
4. zxcvbn feedback shows for common passwords (e.g., "password" shows warning)
</verification>

<success_criteria>
- Password strength meter renders with correct colors by score
- Requirements checklist updates in real-time
- zxcvbn loaded dynamically (not in initial bundle)
- Build completes without errors
- All TypeScript types correct
</success_criteria>

<output>
After completion, create `.planning/phases/12-authentication-hardening/12-02-SUMMARY.md`
</output>
