---
phase: 21-dark-mode-theming
plan: 02
type: execute
wave: 2
depends_on: ["21-01"]
files_modified:
  - src/app/(workspace)/[workspaceSlug]/profile/page.tsx
  - src/components/**/*.tsx (audit - specific files TBD)
autonomous: false

must_haves:
  truths:
    - "All UI components render correctly in light theme"
    - "All UI components render correctly in dark theme"
    - "No hardcoded colors like bg-white, text-black visible"
    - "Text is readable in both themes"
  artifacts:
    - path: "src/app/(workspace)/[workspaceSlug]/profile/page.tsx"
      provides: "Profile page with theme-aware colors"
      contains: "bg-card"
  key_links:
    - from: "all components"
      to: "CSS variables"
      via: "Tailwind theme classes (bg-background, bg-card, text-foreground, etc.)"
      pattern: "bg-(background|card|muted)|text-(foreground|muted-foreground)"
---

<objective>
Audit and fix hardcoded colors to ensure all UI renders correctly in both themes.

Purpose: Complete theme support by ensuring no component breaks in dark mode.
Output: All pages and components render correctly in both light and dark themes.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/21-dark-mode-theming/21-CONTEXT.md
@.planning/phases/21-dark-mode-theming/21-01-SUMMARY.md

CSS variables available (from globals.css):
- bg-background, bg-card, bg-popover, bg-muted, bg-accent, bg-secondary
- text-foreground, text-card-foreground, text-muted-foreground, text-accent-foreground
- border-border, border-input
- Already defined for both light (.root) and dark (.dark) themes
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit and fix hardcoded colors</name>
  <files>
    - src/app/(workspace)/[workspaceSlug]/profile/page.tsx
    - (other files found during audit)
  </files>
  <action>
1. Search for hardcoded colors that won't adapt to dark mode:
   ```bash
   # Find hardcoded white/black backgrounds
   grep -r "bg-white\|bg-black\|bg-gray-\|bg-slate-" --include="*.tsx" src/

   # Find hardcoded text colors
   grep -r "text-white\|text-black\|text-gray-\|text-slate-" --include="*.tsx" src/

   # Find hardcoded border colors
   grep -r "border-gray-\|border-slate-\|border-white\|border-black" --include="*.tsx" src/
   ```

2. Replace hardcoded colors with theme-aware equivalents:
   | Hardcoded | Replace with |
   |-----------|--------------|
   | bg-white | bg-card or bg-background |
   | bg-gray-50, bg-slate-50 | bg-muted |
   | bg-gray-100, bg-slate-100 | bg-accent |
   | text-gray-500, text-slate-500 | text-muted-foreground |
   | text-gray-900, text-slate-900 | text-foreground |
   | border-gray-200, border-slate-200 | border-border |

3. Known issue to fix immediately:
   - src/app/(workspace)/[workspaceSlug]/profile/page.tsx line 49:
     Change `bg-white` to `bg-card`

4. For any hardcoded blue colors (like text-blue-600 on line 44 of profile page):
   - These are accent colors that can stay if they work in both themes
   - OR replace with text-primary if appropriate

5. Check all pages manually accessible from sidebar:
   - Profile page
   - Settings page
   - Channels page
   - Search page
   - Threads page
  </action>
  <verify>
    - grep -r "bg-white" --include="*.tsx" src/ returns no results (or only intentional uses)
    - npm run build succeeds
  </verify>
  <done>
    - All hardcoded colors replaced with theme-aware variables
    - Profile page uses bg-card instead of bg-white
    - No build errors
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Theme infrastructure and color fixes for dark mode support</what-built>
  <how-to-verify>
1. Start dev server: npm run dev
2. Navigate to workspace (any workspace page)
3. In sidebar footer, click the theme toggle (sun/moon icon)
4. Verify these pages in BOTH light and dark mode:
   - Main channel view (messages readable, input visible)
   - Profile page (form visible, no white boxes in dark mode)
   - Settings page (all sections visible)
   - Search page (input and results visible)
   - Thread view (messages and reply input visible)
5. Check specifically:
   - Text is readable (not white-on-white or black-on-black)
   - Borders/dividers are visible
   - Buttons and inputs have proper contrast
   - No jarring white boxes in dark mode
   - Cards and containers have appropriate backgrounds
6. Toggle back and forth - should be instant, no animation
7. Refresh page - theme should persist
  </how-to-verify>
  <resume-signal>Type "approved" if all UI renders correctly in both themes, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
After human verification:
- All 5 success criteria from roadmap are met
- No visual issues in either theme
- Theme toggle works correctly
</verification>

<success_criteria>
- THEME-05: All UI components render correctly in both light and dark themes
- No hardcoded colors that break in dark mode
- Human verified both themes look correct
</success_criteria>

<output>
After completion, create `.planning/phases/21-dark-mode-theming/21-02-SUMMARY.md`
</output>
