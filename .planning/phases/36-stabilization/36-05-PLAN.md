---
phase: 36-stabilization
plan: 05
type: execute
wave: 3
depends_on: ["36-02", "36-03", "36-04"]
files_modified:
  - CHANGELOG.md
  - README.md
autonomous: false

must_haves:
  truths:
    - "All E2E tests pass"
    - "CHANGELOG documents v0.6.0 features and fixes"
    - "README updated with current feature set"
    - "No known critical bugs"
  artifacts:
    - path: "CHANGELOG.md"
      provides: "Version history"
      contains: "v0.6.0"
    - path: "README.md"
      provides: "Project documentation"
      contains: "Features"
  key_links:
    - from: "CHANGELOG.md"
      to: "REQUIREMENTS.md"
      via: "documented features"
      pattern: "SEC2|WKSP|SIDE|MOBI"
---

<objective>
Complete release documentation and final verification for v0.6.0.

Purpose: Ensure v0.6.0 is release-ready with proper documentation and all tests passing. This is the final step before the milestone can be considered complete.

Output: Updated CHANGELOG and README, all E2E tests passing, release readiness confirmed.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/REQUIREMENTS.md
@.planning/phases/36-stabilization/36-02-SUMMARY.md
@.planning/phases/36-stabilization/36-03-SUMMARY.md
@.planning/phases/36-stabilization/36-04-SUMMARY.md

# Existing docs
@CHANGELOG.md
@README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run Full E2E Test Suite and Triage Issues</name>
  <files>
    e2e/tests/**/*.spec.ts
  </files>
  <action>
Run the complete E2E test suite and address any failures:

1. Start the test environment:
   ```bash
   docker compose -f docker-compose.test.yml up -d
   # Wait for healthy
   docker compose -f docker-compose.test.yml ps
   ```

2. Run full test suite:
   ```bash
   npm run test:e2e
   ```

3. Analyze results:
   - If all tests pass: proceed to Task 2
   - If tests fail: triage by severity

4. Triage failed tests:
   - **Critical/High**: Fix in this phase
     - Security tests failing = critical
     - Core flow tests failing = high
   - **Medium/Low**: Document and defer
     - Visual inconsistencies = medium
     - Edge case failures = low

5. Fix critical/high issues:
   - Debug failing tests
   - Fix application code or test code as needed
   - Re-run affected tests to verify fix

6. Document any deferred issues:
   - Add to STATE.md pending todos or deferred debt section
   - Note: per CONTEXT.md, medium/low issues can be deferred

7. Re-run full suite until pass:
   ```bash
   npm run test:e2e
   ```
  </action>
  <verify>
`npm run test:e2e` completes with all tests passing (exit code 0)
  </verify>
  <done>
Full E2E test suite passes, any failures triaged and critical issues fixed
  </done>
</task>

<task type="auto">
  <name>Task 2: Update CHANGELOG and README</name>
  <files>
    CHANGELOG.md
    README.md
  </files>
  <action>
Create/update release documentation:

1. Update CHANGELOG.md with v0.6.0 entry:
   ```markdown
   ## [0.6.0] - 2026-01-XX

   ### Security
   - CSP nonce-based script loading, removed unsafe-inline (SEC2-01)
   - Server-side session validation with immediate revocation (SEC2-02)
   - SVG upload blocking with content detection (SEC2-03)
   - Socket.IO rate limiting for all handlers (SEC2-04)
   - Unicode control character sanitization (SEC2-05)
   - Channel membership verification for notes API (SEC2-06)
   - HMAC-signed audit logs (SEC2-07)
   - Secure data export authorization (SEC2-08)
   - Password breach detection via bloom filter (SEC2-09)
   - Per-user storage quota tracking (SEC2-10)
   - Secure cookie prefix in production (SEC2-11)
   - Structured logging with Pino (SEC2-12)
   - Socket.IO CORS whitelist (SEC2-13)
   - Redirect URL validation (SEC2-14)
   - SSRF DNS rebinding protection (SEC2-15)
   - Soft-locked guest disconnection (SEC2-16)
   - Subresource Integrity for static assets (SEC2-17)
   - Direct security headers on API routes (SEC2-18)
   - Sanitized error messages (SEC2-19)
   - Password history enforcement (SEC2-20)
   - TOTP MFA with backup codes (SEC2-21)
   - Orphaned attachment cleanup job (SEC2-22)

   ### Added
   - Workspace switcher with unread counts
   - Browse and join available workspaces
   - Join request approval workflow
   - Sidebar drag-and-drop category reordering
   - Sidebar drag-and-drop channel reordering
   - Cross-category channel movement
   - DM conversation reordering
   - Sidebar section reordering
   - Mobile More menu for Scheduled/Reminders/Saved
   - Mobile user status control
   - Mobile-optimized emoji picker
   - Mobile workspace analytics

   ### Fixed
   - DMs route 404 on mobile (FIX-01)
   - Profile page spacing (FIX-02)
   - Mobile channel header overflow (FIX-03)
   - Workspace name tooltip on hover (FIX-04)
   - Mobile navigation route highlighting (FIX-05)

   ### Changed
   - New Category button moved to Settings page
   - Mobile touch targets now minimum 44px
   ```

2. Update README.md:
   - Update feature list if needed
   - Add any new environment variables
   - Update setup instructions if changed
   - Verify Docker instructions still accurate

3. Set actual release date when ready to tag
  </action>
  <verify>
- CHANGELOG.md contains v0.6.0 section with all requirements documented
- README.md accurately reflects current features
  </verify>
  <done>
Release documentation complete, CHANGELOG and README updated
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete v0.6.0 stabilization phase with:
- Full E2E test suite (security, workspace, sidebar, mobile, regression)
- Docker Compose test environment
- Updated CHANGELOG and README
  </what-built>
  <how-to-verify>
1. Review test results:
   - Run `npm run test:e2e` and verify all pass
   - Check Playwright HTML report: `npx playwright show-report`

2. Verify key user flows manually (optional spot-check):
   - Login and switch workspaces
   - Drag-drop reorder sidebar category
   - Access scheduled messages from mobile (use devtools responsive mode)
   - Send message and verify realtime delivery

3. Review documentation:
   - Read CHANGELOG.md v0.6.0 section
   - Verify README.md is accurate

4. Confirm release readiness:
   - All E2E tests pass
   - No known critical bugs
   - Documentation complete
  </how-to-verify>
  <resume-signal>
Type "approved" to mark v0.6.0 stabilization complete, or describe any issues found
  </resume-signal>
</task>

</tasks>

<verification>
Release readiness checklist:
- [ ] All E2E tests pass (`npm run test:e2e`)
- [ ] Security tests verify SEC2-01 through SEC2-22
- [ ] Workspace tests verify WKSP2-01 through WKSP2-06
- [ ] Sidebar tests verify SIDE-01 through SIDE-08
- [ ] Mobile tests verify MOBI2-01 through MOBI2-12 (excluding deferred)
- [ ] Regression tests verify v0.5.0 functionality
- [ ] CHANGELOG.md documents all changes
- [ ] README.md is accurate
- [ ] No known critical bugs
</verification>

<success_criteria>
- All E2E tests pass
- CHANGELOG.md contains complete v0.6.0 release notes
- README.md reflects current feature set
- Human verification confirms release readiness
- v0.6.0 milestone can be marked complete
</success_criteria>

<output>
After completion, create `.planning/phases/36-stabilization/36-05-SUMMARY.md`
</output>
